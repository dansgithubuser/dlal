<style>

#body {
  font-family: Monospace;
  line-height: 1;
  display: grid;
  grid-template-columns: repeat(4, max-content);
}

.slot {
  background-color: lightgrey;
  margin: 10px;
  padding: 10px;
  white-space: nowrap;
}

</style>
<script src='common.js'></script>
<script>

async function slotsList() {
  const slots = JSON.parse((await socketSend(`system.${getUrlParam('component')}.slots_list`))['result']);
  function directiveDiv(html) {
    const div = document.createElement('div');
    div.innerHTML = html;
    return div;
  }
  for (const slot of slots) {
    const div = document.createElement('div');
    div.className = 'slot';
    for (const directive of slot) {
      switch (directive[0]) {
        case 0: div.appendChild(directiveDiv(`${directive[1]} ${directive[2]}`)); break;
        case 2: div.appendChild(directiveDiv(directive[1])); break;
        case 3: div.appendChild(directiveDiv(`${directive[1]} <span style='color:blue'>┅┅┅</span> ${directive[2]}`)); break;
        case 4: div.appendChild(directiveDiv(`${directive[1]} <span style='color:red'>┅ ┅</span> ${directive[2]}`)); break;
      }
    }
    e('body').appendChild(div);
  }
}

window.onload = function () {
  socketConnect({ onOpen: slotsList });
}

</script>
<body id='body'>
</body>
